<!DOCTYPE html>

<head>
    <style>
        p{
            font-size: larger;
        }
        td {
            border: solid 1px;
            width: 40px;
            text-align: center;
            font-size: larger;
        }

        tr {
            height: 40px;
        }

        .gr {
            background-color: #BBBBBB;
        }

        .column {
            float: left;
            width: 50%;
            padding: 10px;
        }

        .row:after {
            content: "";
            display: table;
            clear: both;
        }
    </style>
</head>

<body style="margin:1 rem">
    <h2>=== The Knight's Tour ===</h2>
    <div class="row">
        <div style="width: 50%;" class="column">
            <table>
                <tr>
                    <td id="C18" onclick="manual(1, 8)"></td>
                    <td id="C28" class="gr" onclick="manual(2, 8)"></td>
                    <td id="C38" onclick="manual(3, 8)"></td>
                    <td id="C48" class="gr" onclick="manual(4, 8)"></td>
                    <td id="C58" onclick="manual(5, 8)"></td>
                    <td id="C68" class="gr" onclick="manual(6, 8)"></td>
                    <td id="C78" onclick="manual(7, 8)"></td>
                    <td id="C88" class="gr" onclick="manual(8, 8)"></td>
                </tr>
                <tr>
                    <td id="C17" class="gr" onclick="manual(1, 7)"></td>
                    <td id="C27" onclick="manual(2, 7)"></td>
                    <td id="C37" class="gr" onclick="manual(3, 7)"></td>
                    <td id="C47" onclick="manual(4, 7)"></td>
                    <td id="C57" class="gr" onclick="manual(5, 7)"></td>
                    <td id="C67" onclick="manual(6, 7)"></td>
                    <td id="C77" class="gr" onclick="manual(7, 7)"></td>
                    <td id="C87" onclick="manual(8, 7)"></td>
                </tr>
                <tr>
                    <td id="C16" onclick="manual(1, 6)"></td>
                    <td id="C26" class="gr" onclick="manual(2, 6)"></td>
                    <td id="C36" onclick="manual(3, 6)"></td>
                    <td id="C46" class="gr" onclick="manual(4, 6)"></td>
                    <td id="C56" onclick="manual(5, 6)"></td>
                    <td id="C66" class="gr" onclick="manual(6, 6)"></td>
                    <td id="C76" onclick="manual(7, 6)"></td>
                    <td id="C86" class="gr" onclick="manual(8, 6)"></td>
                </tr>
                <tr>
                    <td id="C15" class="gr" onclick="manual(1, 5)"></td>
                    <td id="C25" onclick="manual(2, 5)"></td>
                    <td id="C35" class="gr" onclick="manual(3, 5)"></td>
                    <td id="C45" onclick="manual(4, 5)"></td>
                    <td id="C55" class="gr" onclick="manual(5, 5)"></td>
                    <td id="C65" onclick="manual(6, 5)"></td>
                    <td id="C75" class="gr" onclick="manual(7, 5)"></td>
                    <td id="C85" onclick="manual(8, 5)"></td>
                </tr>
                <tr>
                    <td id="C14" onclick="manual(1, 4)"></td>
                    <td id="C24" class="gr" onclick="manual(2, 4)"></td>
                    <td id="C34" onclick="manual(3, 4)"></td>
                    <td id="C44" class="gr" onclick="manual(4, 4)"></td>
                    <td id="C54" onclick="manual(5, 4)"></td>
                    <td id="C64" class="gr" onclick="manual(6, 4)"></td>
                    <td id="C74" onclick="manual(7, 4)"></td>
                    <td id="C84" class="gr" onclick="manual(8, 4)"></td>
                </tr>
                <tr>
                    <td id="C13" class="gr" onclick="manual(1, 3)"></td>
                    <td id="C23" onclick="manual(2, 3)"></td>
                    <td id="C33" class="gr" onclick="manual(3, 3)"></td>
                    <td id="C43" onclick="manual(4, 3)"></td>
                    <td id="C53" class="gr" onclick="manual(5, 3)"></td>
                    <td id="C63" onclick="manual(6, 3)"></td>
                    <td id="C73" class="gr" onclick="manual(7, 3)"></td>
                    <td id="C83" onclick="manual(8, 3)"></td>
                </tr>
                <tr>
                    <td id="C12" onclick="manual(1, 2)"></td>
                    <td id="C22" class="gr" onclick="manual(2, 2)"></td>
                    <td id="C32" onclick="manual(3, 2)"></td>
                    <td id="C42" class="gr" onclick="manual(4, 2)"></td>
                    <td id="C52" onclick="manual(5, 2)"></td>
                    <td id="C62" class="gr" onclick="manual(6, 2)"></td>
                    <td id="C72" onclick="manual(7, 2)"></td>
                    <td id="C82" class="gr" onclick="manual(8, 2)"></td>
                </tr>
                <tr>
                    <td id="C11" class="gr" onclick="manual(1, 1)"></td>
                    <td id="C21" onclick="manual(2, 1)"></td>
                    <td id="C31" class="gr" onclick="manual(3, 1)"></td>
                    <td id="C41" onclick="manual(4, 1)"></td>
                    <td id="C51" class="gr" onclick="manual(5, 1)"></td>
                    <td id="C61" onclick="manual(6, 1)"></td>
                    <td id="C71" class="gr" onclick="manual(7, 1)"></td>
                    <td id="C81" onclick="manual(8, 1)"></td>
                </tr>
            </table>
            <button id="btn" onclick="next()">&#x23E9;</button>
            <button id="aut" onclick="auto()">Auto</button>
            <button id="rst" onclick="reset()">Reset</button>
        </div>
        <div style="width: 50%; position: relative; float: right;" class="column">
            <p>A <b>knight's tour</b> is a sequence of moves of a knight on a chessboard such that the knight visits
                every square exactly once.</p>
        </div>
    </div>
    <script>
        reset();

        function assign(inputArray) {
            for (j = 0; j <= 7; j++)
                for (i = 0; i <= 7; i++) {
                    indexValue = indexes[i][j];
                    if (indexValue == 0) indexValue = "";
                    cellName = "C" + (i + 1) + "" + (j + 1);
                    document.getElementById(cellName).innerHTML = indexValue;
                }
            cellName = "C" + currentX + "" + currentY;
            document.getElementById(cellName).innerHTML = "<strong>&#9822;</strong>";
        }

        function next() {
            document.getElementById("aut").setAttribute("disabled", "disabled");
            pt = potentialMoves();
            if (pt.length == 0) {
                gameover();
            } else {
                ch = chooseOne(pt);
                indexes[ch[0] - 1][ch[1] - 1] = ++currentTurn;
            }
            assign(indexes);
        }
        function auto() {
            document.getElementById("btn").setAttribute("disabled", "disabled");
            myInt = setInterval(next, 400);
        }

        function reset() {
            document.getElementById("btn").removeAttribute("disabled");
            document.getElementById("aut").removeAttribute("disabled");
            for (i = 1; i <= 8; i++)
                for (j = 1; j <= 8; j++) {
                    tdId = "C" + i + "" + j;
                    document.getElementById(tdId).setAttribute("onclick", "manual(" + i + ", " + j + ")");
                }

            indexes = [
                [0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 1],
                [0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0]
            ];
            myInt = 0;
            currentTurn = 1;
            currentX = 2;
            currentY = 8;

            assign(indexes);
        }

        function potentialMoves() {
            const potentials = [[0, 0]];
            test = potentials;
            tempNewX = currentX + 2;
            tempNewY = currentY + 1;
            addElement(tempNewX, tempNewY);
            tempNewX = currentX + 2;
            tempNewY = currentY - 1;
            addElement(tempNewX, tempNewY);
            tempNewX = currentX + 1;
            tempNewY = currentY + 2;
            addElement(tempNewX, tempNewY);
            tempNewX = currentX + 1;
            tempNewY = currentY - 2;
            addElement(tempNewX, tempNewY);
            tempNewX = currentX - 1;
            tempNewY = currentY + 2;
            addElement(tempNewX, tempNewY);
            tempNewX = currentX - 1;
            tempNewY = currentY - 2;
            addElement(tempNewX, tempNewY);
            tempNewX = currentX - 2;
            tempNewY = currentY + 1;
            addElement(tempNewX, tempNewY);
            tempNewX = currentX - 2;
            tempNewY = currentY - 1;
            addElement(tempNewX, tempNewY);
            potentials.shift();
            return potentials;

            function addElement(x, y) {
                if (x > 0 && x <= 8 && y > 0 && y <= 8)
                    if (indexes[x - 1][y - 1] == 0) potentials.push([x, y]);
            }
        }

        // Chooses one pairs of potential options
        function chooseOne(inputPot) {
            rnd = Math.round(Math.random() * (inputPot.length - 1));
            ret = inputPot[rnd];
            currentX = ret[0];
            currentY = ret[1];
            return ret;
        }

        function manual(tdX, tdY) {
            document.getElementById("aut").setAttribute("disabled", "disabled");
            pt = potentialMoves();
            if (pt.length == 0) {
                gameover();
            } else {
                for (j = 0; j < pt.length; j++) {
                    if (pt[j][0] == tdX && pt[j][1] == tdY) {
                        indexes[tdX - 1][tdY - 1] = ++currentTurn;
                        currentX = tdX;
                        currentY = tdY;
                    }
                }
            }
            assign(indexes);
        }

        function gameover() {
            w = document.getElementsByTagName('td');
            for (i = 0; i < w.length; i++) {
                w[i].removeAttribute("onclick");
            }
            document.getElementById("btn").setAttribute("disabled", "disabled");
            if (myInt > 0) clearInterval(myInt);
            console.log("Last turn was ", currentTurn);
        }
    </script>
</body>